(()=>{var e={};e.id=877,e.ids=[877],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},2192:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),s(32),s(5495),s(5866);var r=s(3191),t=s(8716),o=s(7922),l=s.n(o),i=s(5231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);s.d(a,n);let c=["",{children:["simulado",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,32)),"C:\\simulados-concursos\\src\\app\\simulado\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,5495)),"C:\\simulados-concursos\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\simulados-concursos\\src\\app\\simulado\\page.tsx"],u="/simulado/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/simulado/page",pathname:"/simulado",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9400:(e,a,s)=>{Promise.resolve().then(s.bind(s,5252))},7888:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(6557).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6333:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(6557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6343:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(6557).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},2179:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(6557).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},5290:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(6557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1810:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(6557).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},4893:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(6557).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},9635:(e,a,s)=>{"use strict";s.d(a,{Z:()=>r});let r=(0,s(6557).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},434:(e,a,s)=>{"use strict";s.d(a,{default:()=>t.a});var r=s(9404),t=s.n(r)},5252:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>E});var r=s(326),t=s(7577),o=s(434),l=s(1664),i=s(9752),n=s(8443),c=s(4567),d=s(2777);class u{async buscarQuestoesPorCargo(e){if(!e)throw Error("cargoId \xe9 obrigat\xf3rio");try{let a;console.log("Iniciando busca por cargoId:",e);let{data:s,error:r}=await this.supabase.from("questoes").select("*").eq("cargo_id",e).eq("ativo",!0).order("area_id").order("id");if(r)throw console.error("Erro na query de quest\xf5es:",r),Error(r.message);if(!s||0===s.length)return console.log("Nenhuma quest\xe3o encontrada para o cargo:",e),{questoes:[],areas:[],total:0};console.log(`Quest\xf5es encontradas: ${s.length}`);let{data:t,error:o}=await this.supabase.from("areas_conhecimento").select("*").order("id");o&&console.error("Erro ao buscar todas as \xe1reas:",o),console.log(`Total de \xe1reas no banco: ${t?.length||0}`);let l=[...new Set(s.map(e=>e.area_id).filter(e=>null!==e))];console.log("Area IDs usados pelas quest\xf5es:",l);let{data:i,error:n}=await this.supabase.from("areas_conhecimento").select("*").in("id",l);n&&console.error("Erro na query de areas_conhecimento:",n),console.log(`\xc1reas encontradas para as quest\xf5es: ${i?.length||0}`);let{data:c,error:d}=await this.supabase.from("cargo_areas").select("*").eq("cargo_id",e);d&&console.error("Erro na query de cargo_areas:",d),console.log(`Configura\xe7\xf5es cargo_areas encontradas: ${c?.length||0}`);let u=i?.reduce((e,a)=>(e[a.id]=a.nome,e),{})||{},m=c?.reduce((e,a)=>(e[a.area_id]={numero_questoes:a.numero_questoes,peso:a.peso||1},e),{})||{},x=s.map(e=>({...e,area_nome:u[e.area_id]||`\xc1rea ${e.area_id}`||"\xc1rea Desconhecida",peso_area:m[e.area_id]?.peso||1}));return a=c&&c.length>0?c.map(e=>({id:e.area_id,nome:u[e.area_id]||`\xc1rea ${e.area_id}`,total_questoes:e.numero_questoes,peso:e.peso||1,questoes_respondidas:0,acertos:0,percentual:0})):l.map(e=>{let a=s.filter(a=>a.area_id===e);return{id:e,nome:u[e]||`\xc1rea ${e}`,total_questoes:a.length,peso:1,questoes_respondidas:0,acertos:0,percentual:0}}),console.log(`Busca conclu\xedda: ${x.length} quest\xf5es, ${a.length} \xe1reas`),{questoes:x,areas:a,total:x.length}}catch(e){throw console.error("Erro geral ao buscar quest\xf5es:",e),e}}async buscarQuestoesPorArea(e,a,s){try{let r=this.supabase.from("questoes").select("*").eq("cargo_id",e).eq("area_id",a).eq("ativo",!0).order("id");s&&(r=r.limit(s));let{data:t,error:o}=await r;if(o)throw Error(o.message);if(!t||0===t.length)return[];let{data:l,error:i}=await this.supabase.from("areas_conhecimento").select("nome").eq("id",a).single();i&&console.warn("Erro ao buscar nome da \xe1rea:",i);let{data:n,error:c}=await this.supabase.from("cargo_areas").select("peso").eq("cargo_id",e).eq("area_id",a).single();return c&&console.warn("Erro ao buscar configura\xe7\xe3o da \xe1rea:",c),t.map(e=>({...e,area_nome:l?.nome||"\xc1rea Desconhecida",peso_area:n?.peso||1}))}catch(e){throw console.error("Erro ao buscar quest\xf5es por \xe1rea:",e),e}}async gerarSimuladoPersonalizado(e){try{console.log("\uD83C\uDFAF Iniciando gera\xe7\xe3o do simulado para cargo:",e);let{data:a,error:s}=await this.supabase.from("questoes").select("*").eq("cargo_id",e).eq("ativo",!0);if(s)throw console.error("Erro ao buscar quest\xf5es:",s),Error(s.message);if(!a||0===a.length)return console.warn("Nenhuma quest\xe3o encontrada para o cargo"),[];console.log(`📚 Total de quest\xf5es dispon\xedveis: ${a.length}`);let{data:r,error:t}=await this.supabase.from("cargo_areas").select("area_id, numero_questoes").eq("cargo_id",e);if(t&&console.error("Erro ao buscar configura\xe7\xe3o:",t),console.log(`⚙️ Configura\xe7\xf5es encontradas: ${r?.length||0}`),!r||0===r.length){console.log("\uD83D\uDCCB Sem configura\xe7\xe3o espec\xedfica, usando todas as quest\xf5es embaralhadas");let e=[...new Set(a.map(e=>e.area_id))],{data:s}=await this.supabase.from("areas_conhecimento").select("*").in("id",e),r=s?.reduce((e,a)=>(e[a.id]=a.nome,e),{})||{},t=a.map(e=>({...e,area_nome:r[e.area_id]||`\xc1rea ${e.area_id}`,peso_area:1})),o=this.embaralharArray(t).slice(0,120);return console.log(`✅ Simulado gerado sem configura\xe7\xe3o: ${o.length} quest\xf5es`),o}let{data:o}=await this.supabase.from("areas_conhecimento").select("*"),{data:l}=await this.supabase.from("cargo_areas").select("*").eq("cargo_id",e),i=o?.reduce((e,a)=>(e[a.id]=a.nome,e),{})||{},n=l?.reduce((e,a)=>(e[a.area_id]=a.peso||1,e),{})||{},c=a.map(e=>({...e,area_nome:i[e.area_id]||`\xc1rea ${e.area_id}`,peso_area:n[e.area_id]||1})),d=[];for(let e of r){let a=c.filter(a=>a.area_id===e.area_id);if(console.log(`📊 \xc1rea ${e.area_id}: ${a.length} quest\xf5es dispon\xedveis, ${e.numero_questoes} solicitadas`),a.length>0){let s=this.embaralharArray(a).slice(0,e.numero_questoes);d.push(...s),console.log(`✅ Selecionadas ${s.length} quest\xf5es da \xe1rea ${e.area_id}`)}else console.warn(`⚠️ Nenhuma quest\xe3o encontrada para \xe1rea ${e.area_id}`)}let u=this.embaralharArray(d);return console.log(`🎉 Simulado final gerado: ${u.length} quest\xf5es`),console.log("\uD83D\uDCCB Distribui\xe7\xe3o por \xe1rea:",u.reduce((e,a)=>(e[a.area_nome]=(e[a.area_nome]||0)+1,e),{})),u}catch(e){throw console.error("❌ Erro ao gerar simulado:",e),e}}async testarConexao(){try{console.log("Testando conex\xe3o com Supabase...");let{data:e,error:a}=await this.supabase.from("questoes").select("id").limit(1);if(a)throw console.error("Erro de conex\xe3o:",{message:a.message,code:a.code,details:a.details,hint:a.hint}),a;return console.log("Conex\xe3o bem-sucedida, dados retornados:",e),!0}catch(e){throw console.error("Erro geral na conex\xe3o:",e),e}}async buscarEstatisticasUsuario(e,a){try{let{data:s,error:r}=await this.supabase.from("estatisticas_areas").select("*").eq("user_id",e).eq("cargo_id",a);if(r)throw Error(r.message);if(!s||0===s.length)return[];let t=s.map(e=>e.area_id),{data:o,error:l}=await this.supabase.from("areas_conhecimento").select("*").in("id",t);l&&console.warn("Erro ao buscar \xe1reas:",l);let{data:i,error:n}=await this.supabase.from("cargo_areas").select("*").eq("cargo_id",a).in("area_id",t);n&&console.warn("Erro ao buscar configura\xe7\xe3o das \xe1reas:",n);let c=o?.reduce((e,a)=>(e[a.id]=a.nome,e),{})||{},d=i?.reduce((e,a)=>(e[a.area_id]=a.peso||1,e),{})||{};return s.map(e=>({id:e.area_id,nome:c[e.area_id]||"\xc1rea Desconhecida",total_questoes:e.total_questoes||0,peso:d[e.area_id]||1,questoes_respondidas:e.total_questoes||0,acertos:e.acertos||0,percentual:e.percentual||0}))}catch(e){throw console.error("Erro ao buscar estat\xedsticas:",e),e}}async salvarResultadoSimulado(e,a,s,r,t){try{let o=0,l=0,i=0;s.forEach(e=>{l+=e.peso_area,r[e.id]===e.resposta_correta&&(i++,o+=e.peso_area)});let n=i/s.length*100,{data:c,error:d}=await this.supabase.from("simulados").insert({user_id:e,cargo_id:a,tipo:"personalizado",status:"concluido",data_conclusao:new Date().toISOString(),tempo_gasto:t,pontuacao_total:o,percentual_acertos:n}).select("id").single();if(d)throw Error(d.message);let u=s.map((e,a)=>({simulado_id:c.id,questao_id:e.id,ordem:a+1,resposta_usuario:r[e.id]||null,correta:r[e.id]===e.resposta_correta,tempo_resposta:Math.floor(t/s.length)})),{error:m}=await this.supabase.from("simulado_questoes").insert(u);if(m)throw Error(m.message);return await this.atualizarEstatisticasAreas(e,a,s,r),c.id}catch(e){throw console.error("Erro ao salvar resultado:",e),e}}async atualizarEstatisticasAreas(e,a,s,r){for(let[t,o]of Object.entries(s.reduce((e,a)=>(e[a.area_id]||(e[a.area_id]=[]),e[a.area_id].push(a),e),{}))){let s=parseInt(t),l=o.filter(e=>r[e.id]===e.resposta_correta).length,i=o.length,{data:n}=await this.supabase.from("estatisticas_areas").select("*").eq("user_id",e).eq("cargo_id",a).eq("area_id",s).single();if(n){let e=n.total_questoes+i,a=n.acertos+l,s=a/e*100;await this.supabase.from("estatisticas_areas").update({total_questoes:e,acertos:a,percentual:s,ultima_atualizacao:new Date().toISOString()}).eq("id",n.id)}else{let r=l/i*100;await this.supabase.from("estatisticas_areas").insert({user_id:e,cargo_id:a,area_id:s,total_questoes:i,acertos:l,percentual:r})}}}embaralharArray(e){let a=[...e];for(let e=a.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1));[a[e],a[s]]=[a[s],a[e]]}return a}constructor(){this.supabase=(0,d.e)()}}function m(e=1){let{user:a}=(0,c.a)(),[s,r]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[i,n]=(0,t.useState)(!0),[d,m]=(0,t.useState)(null),[x,h]=(0,t.useState)(null),g=(0,t.useMemo)(()=>new u,[]),p=(0,t.useCallback)(async(a=!1)=>{if(!a&&x===e&&s.length>0){console.log("Quest\xf5es j\xe1 carregadas para este cargo, pulando...");return}try{n(!0),m(null),console.log(`🔄 Carregando quest\xf5es para cargo ${e}...`),await g.testarConexao(),console.log("✅ Conex\xe3o com Supabase OK");let a=await g.buscarQuestoesPorCargo(e);console.log(`📊 Resultado da busca:`,{totalQuestoes:a.questoes.length,totalAreas:a.areas.length,areas:a.areas.map(e=>({id:e.id,nome:e.nome,questoes:e.total_questoes}))}),0===a.questoes.length?(console.warn(`⚠️ Nenhuma quest\xe3o encontrada para o cargo ${e}`),m(`Nenhuma quest\xe3o encontrada para o cargo selecionado`)):(r(a.questoes),l(a.areas),h(e),console.log(`✅ ${a.questoes.length} quest\xf5es carregadas com sucesso`))}catch(e){console.error("❌ Erro ao carregar quest\xf5es:",e),e instanceof Error?e.message.includes("JWT")?m("Erro de autentica\xe7\xe3o. Fa\xe7a login novamente."):e.message.includes("network")||e.message.includes("fetch")?m("Erro de conex\xe3o. Verifique sua internet."):m(`Erro ao carregar quest\xf5es: ${e.message}`):m("Erro desconhecido ao carregar quest\xf5es")}finally{n(!1)}},[e,x,s.length,g]),b=(0,t.useCallback)(async()=>{try{console.log(`🎯 Gerando simulado para cargo ${e}...`);let a=await g.gerarSimuladoPersonalizado(e);return console.log(`✅ Simulado gerado: ${a.length} quest\xf5es`),console.log("\uD83D\uDCCB Distribui\xe7\xe3o por \xe1rea:",a.reduce((e,a)=>(e[a.area_nome]=(e[a.area_nome]||0)+1,e),{})),a}catch(e){throw console.error("❌ Erro ao gerar simulado:",e),Error("Erro ao gerar simulado. Tente novamente.")}},[e,g]),f=(0,t.useCallback)(async(s,r,t)=>{if(!a)throw Error("Usu\xe1rio n\xe3o logado");try{console.log(`💾 Salvando resultado do simulado...`,{userId:a.id,cargoId:e,totalQuestoes:s.length,totalRespostas:Object.keys(r).length,tempoGasto:`${Math.floor(t/60)}min ${t%60}s`});let o=await g.salvarResultadoSimulado(a.id,e,s,r,t);return console.log(`✅ Resultado salvo com ID: ${o}`),o}catch(e){throw console.error("❌ Erro ao salvar resultado:",e),Error("Erro ao salvar resultado")}},[a,e,g]),j=(0,t.useCallback)(async()=>{if(!a)return console.log("\uD83D\uDC64 Usu\xe1rio n\xe3o logado, retornando estat\xedsticas vazias"),[];try{console.log(`📈 Carregando estat\xedsticas para usu\xe1rio ${a.id}...`);let s=await g.buscarEstatisticasUsuario(a.id,e);return console.log(`✅ Estat\xedsticas carregadas:`,s.map(e=>({area:e.nome,acertos:e.acertos,total:e.total_questoes,percentual:e.percentual.toFixed(1)+"%"}))),s}catch(e){return console.error("❌ Erro ao carregar estat\xedsticas:",e),[]}},[a,e,g]),v=(0,t.useCallback)(async(a,s)=>{try{console.log(`🔍 Buscando quest\xf5es da \xe1rea ${a}...`);let r=await g.buscarQuestoesPorArea(e,a,s);return console.log(`✅ ${r.length} quest\xf5es encontradas para a \xe1rea`),r}catch(e){throw console.error("❌ Erro ao buscar quest\xf5es por \xe1rea:",e),Error("Erro ao buscar quest\xf5es da \xe1rea")}},[e,g]),y=(0,t.useMemo)(()=>{if(0===s.length)return null;let e=s.reduce((e,a)=>(e[a.area_nome]=(e[a.area_nome]||0)+1,e),{});return{totalQuestoes:s.length,totalAreas:o.length,questoesPorArea:e,areasDisponiveis:o.map(e=>({id:e.id,nome:e.nome,questoes:e.total_questoes,peso:e.peso}))}},[s,o]),_=!i&&s.length>0&&o.length>0,N=(0,t.useMemo)(()=>({cargoId:e,totalQuestoes:s.length,totalAreas:o.length,lastCargoId:x,loading:i,error:d,isReady:_,questoesPorArea:s.reduce((e,a)=>(e[a.area_nome]=(e[a.area_nome]||0)+1,e),{}),areasConfiguradas:o.map(e=>({id:e.id,nome:e.nome,questoesConfiguradas:e.total_questoes,peso:e.peso})),amostraQuestoes:s.slice(0,2).map(e=>({id:e.id,area:e.area_nome,enunciado:e.enunciado.substring(0,50)+"..."}))}),[e,s,o,x,i,d,_]);return{questoes:s,areas:o,loading:i,error:d,isReady:_,estatisticas:y,gerarSimulado:b,salvarResultado:f,carregarEstatisticas:j,buscarQuestoesPorArea:v,recarregar:()=>p(!0),debug:N}}function x(){let{questoes:e,areas:a,loading:s,error:t,debug:o,estatisticas:l}=m(1);return(0,r.jsxs)("div",{className:"fixed top-4 right-4 bg-white border-2 border-red-300 p-4 rounded-lg shadow-lg max-w-sm z-50",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h3",{className:"font-bold text-red-700",children:"\uD83D\uDD0D Debug Hook"}),(0,r.jsxs)("div",{className:"text-xs bg-red-100 px-2 py-1 rounded",children:["Cargo: ",o?.cargoId]})]}),(0,r.jsxs)("div",{className:"text-xs space-y-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:`p-2 rounded ${s?"bg-yellow-100":"bg-green-100"}`,children:[r.jsx("div",{className:"font-medium",children:"Loading"}),r.jsx("div",{children:s?"SIM":"N\xc3O"})]}),(0,r.jsxs)("div",{className:`p-2 rounded ${t?"bg-red-100":"bg-green-100"}`,children:[r.jsx("div",{className:"font-medium",children:"Error"}),r.jsx("div",{children:t?"SIM":"N\xc3O"})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-2 rounded",children:[r.jsx("div",{className:"font-medium mb-1",children:"Contadores:"}),(0,r.jsxs)("div",{children:["Quest\xf5es: ",r.jsx("strong",{children:e.length})]}),(0,r.jsxs)("div",{children:["\xc1reas: ",r.jsx("strong",{children:a.length})]}),(0,r.jsxs)("div",{children:["isReady: ",r.jsx("strong",{children:o?.isReady?"SIM":"N\xc3O"})]})]}),t&&(0,r.jsxs)("div",{className:"bg-red-50 p-2 rounded border border-red-200",children:[r.jsx("div",{className:"font-medium text-red-700 mb-1",children:"Erro:"}),r.jsx("div",{className:"text-red-600 text-xs",children:t})]}),o&&(0,r.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[r.jsx("div",{className:"font-medium mb-1",children:"Debug Info:"}),(0,r.jsxs)("div",{children:["LastCargoId: ",o.lastCargoId]}),(0,r.jsxs)("div",{children:["Total Quest\xf5es: ",o.totalQuestoes]}),(0,r.jsxs)("div",{children:["Total \xc1reas: ",o.totalAreas]})]}),o?.questoesPorArea&&Object.keys(o.questoesPorArea).length>0&&(0,r.jsxs)("div",{className:"bg-green-50 p-2 rounded",children:[r.jsx("div",{className:"font-medium mb-1",children:"Por \xc1rea:"}),Object.entries(o.questoesPorArea).map(([e,a])=>(0,r.jsxs)("div",{className:"text-xs",children:[e,": ",a]},e))]}),o?.areasConfiguradas&&o.areasConfiguradas.length>0&&(0,r.jsxs)("div",{className:"bg-purple-50 p-2 rounded",children:[r.jsx("div",{className:"font-medium mb-1",children:"\xc1reas Config:"}),o.areasConfiguradas.map(e=>(0,r.jsxs)("div",{className:"text-xs",children:[e.nome,": ",e.questoesConfiguradas]},e.id))]}),o?.amostraQuestoes&&o.amostraQuestoes.length>0&&(0,r.jsxs)("div",{className:"bg-yellow-50 p-2 rounded",children:[r.jsx("div",{className:"font-medium mb-1",children:"Amostra:"}),o.amostraQuestoes.map(e=>(0,r.jsxs)("div",{className:"text-xs mb-1",children:["#",e.id," (",e.area,"): ",e.enunciado]},e.id))]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700",children:"\uD83D\uDD04 Recarregar P\xe1gina"})]})]})}var h=s(5290),g=s(7888),p=s(6557);let b=(0,p.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var f=s(6343),j=s(9635),v=s(1810),y=s(6333),_=s(2179),N=s(4893);let q=(0,p.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),w=(0,p.Z)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),C=(0,p.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),E=()=>{let{user:e,profile:a,signOut:s}=(0,c.a)(),{questoes:d,areas:u,loading:p,error:E,gerarSimulado:S,salvarResultado:k,recarregar:D,debug:$}=m(1),[Z,A]=(0,t.useState)([]),[P,z]=(0,t.useState)(0),[M,I]=(0,t.useState)({}),[Q,O]=(0,t.useState)(14400),[F,R]=(0,t.useState)(!1),[T,G]=(0,t.useState)(!1),[L,B]=(0,t.useState)({}),[H,U]=(0,t.useState)(!1),[V,Y]=(0,t.useState)(!1),[J,K]=(0,t.useState)(!1);(0,t.useEffect)(()=>{console.log("\uD83D\uDD0D Debug SimuladoPage:",{questoesDisponiveis:d.length,areas:u.length,loading:p,error:E,debug:$})},[d,u,p,E,$]),(0,t.useEffect)(()=>{let e;return F&&Q>0&&!T&&(e=setInterval(()=>{O(Q-1)},1e3)),()=>clearInterval(e)},[F,Q,T]);let W=async()=>{try{console.log("\uD83C\uDFAF Bot\xe3o clicado - Iniciando gera\xe7\xe3o do simulado..."),console.log("Estado atual:",{gerandoSimulado:J,questoesDisponiveis:d.length,isStarted:H}),K(!0),console.log("✅ setGerandoSimulado(true) executado");let e=await S();console.log("✅ gerarSimulado() retornou:",e.length,"quest\xf5es"),A(e),console.log("✅ setQuestoesSimulado() executado com",e.length,"quest\xf5es"),U(!0),console.log("✅ setIsStarted(true) executado"),R(!0),console.log("✅ setIsRunning(true) executado"),console.log("\uD83C\uDF89 Todos os estados atualizados, interface deve mudar agora")}catch(e){console.error("❌ Erro ao gerar simulado:",e),alert(`Erro ao gerar simulado: ${e.message}`)}finally{K(!1),console.log("\uD83C\uDFC1 setGerandoSimulado(false) executado")}},X=(e,a)=>{I({...M,[e]:a})},ee=async()=>{if(R(!1),G(!0),e)try{Y(!0);await k(Z,M,14400-Q)}catch(e){console.error("Erro ao salvar resultado:",e)}finally{Y(!1)}},ea=async()=>{await s()},es=Z[P],er=T?(()=>{let e=0,a=0,s=0;Z.forEach(r=>{a+=r.peso_area,M[r.id]===r.resposta_correta&&(e++,s+=r.peso_area)});let r=u.map(e=>{let a=Z.filter(a=>a.area_id===e.id),s=a.filter(e=>M[e.id]===e.resposta_correta).length;return{...e,questoes_respondidas:a.length,acertos:s,percentual:a.length>0?s/a.length*100:0}});return{correct:e,total:Z.length,percentage:Z.length>0?e/Z.length*100:0,weightedScore:a>0?s/a*100:0,porArea:r}})():null;return p?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:[r.jsx(x,{}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(h.Z,{className:"h-12 w-12 animate-spin mx-auto text-blue-600 mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"Carregando quest\xf5es..."}),r.jsx("p",{className:"text-gray-500",children:"Buscando quest\xf5es do banco de dados"})]})]}):E?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:[r.jsx(x,{}),r.jsx(i.Zb,{className:"max-w-md",children:(0,r.jsxs)(i.aY,{className:"p-6 text-center",children:[r.jsx(g.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Erro ao carregar quest\xf5es"}),r.jsx("p",{className:"text-gray-600 mb-4",children:E}),(0,r.jsxs)(l.z,{onClick:D,className:"mr-2",children:[r.jsx(b,{className:"h-4 w-4 mr-2"}),"Tentar novamente"]}),r.jsx(o.default,{href:"/",children:r.jsx(l.z,{variant:"outline",children:"Voltar ao in\xedcio"})})]})})]}):H?T&&er?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(o.default,{href:"/",className:"flex items-center space-x-2",children:[r.jsx(f.Z,{className:"h-6 w-6 text-blue-600"}),r.jsx("span",{className:"font-bold text-gray-900",children:"SimuladosPro"})]}),(0,r.jsxs)(n.C,{variant:"outline",children:["Quest\xe3o ",P+1," de ",Z.length]}),e&&(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[r.jsx(j.Z,{className:"h-4 w-4"}),r.jsx("span",{children:a?.nome||e.email})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(q,{className:"h-5 w-5 text-gray-600"}),r.jsx("span",{className:"font-mono text-lg font-semibold",children:`${Math.floor(Q/3600).toString().padStart(2,"0")}:${Math.floor(Q%3600/60).toString().padStart(2,"0")}:${(Q%60).toString().padStart(2,"0")}`}),r.jsx(l.z,{onClick:()=>R(!F),variant:"outline",size:"sm",children:F?r.jsx(w,{className:"h-4 w-4"}):r.jsx(N.Z,{className:"h-4 w-4"})})]}),e&&(0,r.jsxs)(l.z,{variant:"outline",size:"sm",onClick:ea,children:[r.jsx(v.Z,{className:"h-4 w-4 mr-1"}),"Sair"]}),r.jsx(l.z,{onClick:ee,variant:"destructive",children:"Finalizar"})]})]}),r.jsx("div",{className:"mt-4",children:r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(P+1)/Z.length*100}%`}})})})]})}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[es&&(0,r.jsxs)(i.Zb,{className:"mb-6",children:[r.jsx(i.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(i.ll,{className:"text-xl",children:["Quest\xe3o ",P+1," - ",es.area_nome]}),(0,r.jsxs)(n.C,{variant:"outline",children:["Peso ",es.peso_area]})]})}),(0,r.jsxs)(i.aY,{children:[r.jsx("p",{className:"text-lg mb-6 leading-relaxed whitespace-pre-line",children:es.enunciado}),r.jsx("div",{className:"space-y-3",children:[{key:"A",value:es.alternativa_a},{key:"B",value:es.alternativa_b},{key:"C",value:es.alternativa_c},{key:"D",value:es.alternativa_d},...es.alternativa_e?[{key:"E",value:es.alternativa_e}]:[]].map(({key:e,value:a})=>(0,r.jsxs)("button",{onClick:()=>X(es.id,e),className:`w-full text-left p-4 rounded-lg border-2 transition-all hover:bg-gray-50 ${M[es.id]===e?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[(0,r.jsxs)("span",{className:"font-semibold text-blue-600",children:[e,")"]})," ",a]},e))})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(l.z,{onClick:()=>z(Math.max(0,P-1)),disabled:0===P,variant:"outline",children:[r.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"Anterior"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Quest\xe3o ",P+1," de ",Z.length]}),(0,r.jsxs)(l.z,{onClick:()=>z(Math.min(Z.length-1,P+1)),disabled:P===Z.length-1,children:["Pr\xf3xima",r.jsx(C,{className:"h-4 w-4 ml-2"})]})]}),(0,r.jsxs)(i.Zb,{className:"mt-6",children:[r.jsx(i.Ol,{children:r.jsx(i.ll,{className:"text-lg",children:"Mapa de Quest\xf5es"})}),(0,r.jsxs)(i.aY,{children:[r.jsx("div",{className:"grid grid-cols-10 gap-2",children:Z.map((e,a)=>r.jsx("button",{onClick:()=>z(a),className:`w-10 h-10 rounded text-sm font-semibold ${a===P?"bg-blue-600 text-white":M[Z[a].id]?"bg-green-100 text-green-800 border border-green-300":"bg-gray-100 text-gray-600 border border-gray-300"}`,children:a+1},a))}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-6 mt-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-4 h-4 bg-blue-600 rounded mr-2"}),"Atual"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded mr-2"}),"Respondida"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-4 h-4 bg-gray-100 border border-gray-300 rounded mr-2"}),"N\xe3o respondida"]})]})]})]})]})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[r.jsx(x,{}),r.jsx(()=>r.jsx("header",{className:"container mx-auto px-4 py-6",children:(0,r.jsxs)("nav",{className:"flex items-center justify-between",children:[(0,r.jsxs)(o.default,{href:"/",className:"flex items-center space-x-2",children:[r.jsx(f.Z,{className:"h-8 w-8 text-blue-600"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"SimuladosPro"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(j.Z,{className:"h-4 w-4"}),r.jsx("span",{children:a?.nome||e.email})]}),(0,r.jsxs)(l.z,{variant:"outline",onClick:ea,children:[r.jsx(v.Z,{className:"h-4 w-4 mr-2"}),"Sair"]})]}):r.jsx(o.default,{href:"/login",children:r.jsx(l.z,{variant:"outline",children:"Fazer Login"})}),r.jsx(o.default,{href:"/",children:(0,r.jsxs)(l.z,{variant:"outline",children:[r.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"Voltar ao In\xedcio"]})})]})]})}),{}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[r.jsx(n.C,{className:"mb-6 bg-green-100 text-green-800 border-green-200",children:"Simulado Gratuito"}),r.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Simulado - Agente de Educa\xe7\xe3o Infantil"}),r.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"S\xe3o Louren\xe7o do Oeste/SC - HC Assessoria"}),r.jsx(i.Zb,{className:"mb-8",children:r.jsx(i.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:d.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Quest\xf5es"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:"4h"}),r.jsx("div",{className:"text-sm text-gray-600",children:"Tempo"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"42"}),r.jsx("div",{className:"text-sm text-gray-600",children:"Vagas"})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"HC"}),r.jsx("div",{className:"text-sm text-gray-600",children:"Assessoria"})]})]})})}),(0,r.jsxs)(i.Zb,{className:"mb-8",children:[r.jsx(i.Ol,{children:r.jsx(i.ll,{children:"Distribui\xe7\xe3o de Quest\xf5es por \xc1rea"})}),r.jsx(i.aY,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("span",{className:"font-medium",children:e.nome}),(0,r.jsxs)(n.C,{variant:"outline",children:[e.total_questoes," quest\xf5es"]})]},e.id))})})]}),!e&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-8",children:(0,r.jsxs)("p",{className:"text-yellow-800",children:[r.jsx(g.Z,{className:"inline h-5 w-5 mr-2"}),"Fa\xe7a ",r.jsx(o.default,{href:"/login",className:"text-blue-600 underline",children:"login"})," para salvar seu progresso e acompanhar estat\xedsticas"]})}),e&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-8",children:(0,r.jsxs)("p",{className:"text-green-800",children:[r.jsx(_.Z,{className:"inline h-5 w-5 mr-2"}),"Logado como ",a?.nome||e.email,". Seus resultados ser\xe3o salvos automaticamente!"]})}),r.jsx(l.z,{onClick:W,size:"lg",className:"px-8 py-4 text-xl",disabled:J||0===d.length,children:J?(0,r.jsxs)(r.Fragment,{children:[r.jsx(h.Z,{className:"mr-2 h-6 w-6 animate-spin"}),"Gerando Simulado..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(N.Z,{className:"mr-2 h-6 w-6"}),"Iniciar Simulado"]})}),!1]})})]})}},32:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`C:\simulados-concursos\src\app\simulado\page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),r=a.X(0,[780,404,175],()=>s(2192));module.exports=r})();