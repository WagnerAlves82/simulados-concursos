"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[514],{2514:function(e,a,s){s.d(a,{Z:function(){return L}});var t=s(7437),r=s(2265),l=s(5648),i=s(2381),n=s(9820),o=s(9174),c=s(1312),d=s(3448);let u=c.fC,m=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(c.aV,{ref:a,className:(0,d.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...r})});m.displayName=c.aV.displayName;let x=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(c.xz,{ref:a,className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...r})});x.displayName=c.xz.displayName;let h=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(c.VY,{ref:a,className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});h.displayName=c.VY.displayName;let f=r.forwardRef((e,a)=>{let{className:s,type:r,...l}=e;return(0,t.jsx)("input",{type:r,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...l})});f.displayName="Input";let p=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("textarea",{className:(0,d.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...r})});p.displayName="Textarea";var j=s(5526);class g{async buscarEstatisticas(){try{let{count:e}=await this.supabase.from("questoes").select("*",{count:"exact",head:!0}),{count:a}=await this.supabase.from("cargos").select("*",{count:"exact",head:!0}),{count:s}=await this.supabase.from("profiles").select("*",{count:"exact",head:!0}),{count:t}=await this.supabase.from("simulados").select("*",{count:"exact",head:!0}),{data:r}=await this.supabase.from("questoes").select("cargo_id").eq("ativo",!0),l=[...new Set(null==r?void 0:r.map(e=>e.cargo_id))],{data:i}=await this.supabase.from("cargos").select("id, banca").in("id",l),n={};null==r||r.forEach(e=>{let a=null==i?void 0:i.find(a=>a.id===e.cargo_id),s=(null==a?void 0:a.banca)||"Desconhecida";n[s]=(n[s]||0)+1});let o=[...new Set(null==r?void 0:r.map(e=>e.area_id).filter(e=>null!=e))],{data:c}=await this.supabase.from("areas_conhecimento").select("id, nome").in("id",o),d={};null==r||r.forEach(e=>{if(e.area_id){let a=null==c?void 0:c.find(a=>a.id===e.area_id),s=(null==a?void 0:a.nome)||"\xc1rea Desconhecida";d[s]=(d[s]||0)+1}});let u=new Date;u.setDate(u.getDate()-7);let{count:m}=await this.supabase.from("profiles").select("*",{count:"exact",head:!0}).gte("ultimo_acesso",u.toISOString());return{totalQuestoes:e||0,totalCargos:a||0,totalUsuarios:s||0,totalSimulados:t||0,questoesPorBanca:n,questoesPorArea:d,acessosRecentes:m||0}}catch(e){throw console.error("Erro ao buscar estat\xedsticas:",e),Error("Erro ao carregar estat\xedsticas do dashboard")}}async buscarCargos(){try{let{data:e,error:a}=await this.supabase.from("cargos").select("*").order("nome");if(a)throw a;return await Promise.all((e||[]).map(async e=>{let{count:a}=await this.supabase.from("questoes").select("*",{count:"exact",head:!0}).eq("cargo_id",e.id).eq("ativo",!0);return{...e,questoes_count:a||0}}))}catch(e){throw console.error("Erro ao buscar cargos:",e),Error("Erro ao carregar cargos")}}async buscarAreas(){try{let{data:e,error:a}=await this.supabase.from("areas_conhecimento").select("*").order("nome");if(a)throw a;return e||[]}catch(e){throw console.error("Erro ao buscar \xe1reas:",e),Error("Erro ao carregar \xe1reas de conhecimento")}}async buscarBancas(){try{let{data:e}=await this.supabase.from("cargos").select("banca").order("banca"),a=[...new Set(null==e?void 0:e.map(e=>e.banca))],s=[];for(let e of a){let{data:a}=await this.supabase.from("cargos").select("id").eq("banca",e),t=(null==a?void 0:a.map(e=>e.id))||[],{count:r}=await this.supabase.from("questoes").select("*",{count:"exact",head:!0}).in("cargo_id",t).eq("ativo",!0),{count:l}=await this.supabase.from("cargos").select("*",{count:"exact",head:!0}).eq("banca",e);s.push({nome:e,questoes:r||0,cargos:l||0,ativa:!0})}return s}catch(e){throw console.error("Erro ao buscar bancas:",e),Error("Erro ao carregar bancas")}}async criarQuestao(e){try{let{data:a,error:s}=await this.supabase.from("questoes").insert({...e,ativo:!0,dificuldade:e.dificuldade||2}).select().single();if(s)throw s;return a}catch(e){throw console.error("Erro ao criar quest\xe3o:",e),Error("Erro ao criar quest\xe3o")}}async buscarQuestoes(e){try{let a=this.supabase.from("questoes").select("\n          *,\n          cargos(nome),\n          areas_conhecimento(nome)\n        ").eq("ativo",!0).order("created_at",{ascending:!1});e.cargo_id&&(a=a.eq("cargo_id",e.cargo_id)),e.area_id&&(a=a.eq("area_id",e.area_id)),e.busca&&(a=a.ilike("enunciado","%".concat(e.busca,"%"))),e.limit&&(a=a.limit(e.limit)),e.offset&&(a=a.range(e.offset,e.offset+(e.limit||10)-1));let{data:s,error:t}=await a;if(t)throw t;return s||[]}catch(e){throw console.error("Erro ao buscar quest\xf5es:",e),Error("Erro ao buscar quest\xf5es")}}async deletarQuestao(e){try{let{error:a}=await this.supabase.from("questoes").update({ativo:!1}).eq("id",e);if(a)throw a;return!0}catch(e){throw console.error("Erro ao deletar quest\xe3o:",e),Error("Erro ao deletar quest\xe3o")}}async criarCargo(e){try{let{data:a,error:s}=await this.supabase.from("cargos").insert({...e,ativo:!0}).select().single();if(s)throw s;return a}catch(e){throw console.error("Erro ao criar cargo:",e),Error("Erro ao criar cargo")}}async exportarQuestoes(e){try{let a=this.supabase.from("questoes").select("\n          *,\n          cargos(nome),\n          areas_conhecimento(nome)\n        ").eq("ativo",!0);e&&(a=a.eq("cargo_id",e));let{data:s,error:t}=await a;if(t)throw t;return(null==s?void 0:s.map(e=>{var a,s;return{id:e.id,cargo:null===(a=e.cargos)||void 0===a?void 0:a.nome,area:null===(s=e.areas_conhecimento)||void 0===s?void 0:s.nome,enunciado:e.enunciado,alternativa_a:e.alternativa_a,alternativa_b:e.alternativa_b,alternativa_c:e.alternativa_c,alternativa_d:e.alternativa_d,alternativa_e:e.alternativa_e,resposta_correta:e.resposta_correta,feedback:e.feedback,dificuldade:e.dificuldade,fonte:e.fonte}}))||[]}catch(e){throw console.error("Erro ao exportar quest\xf5es:",e),Error("Erro ao exportar quest\xf5es")}}constructor(){this.supabase=(0,j.e)()}}var v=s(2787),b=s(875),N=s(2135),w=s(401);let y=v.fC;v.ZA;let _=v.B4,E=r.forwardRef((e,a)=>{let{className:s,children:r,...l}=e;return(0,t.jsxs)(v.xz,{ref:a,className:(0,d.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-background px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,t.jsx)(v.JO,{asChild:!0,children:(0,t.jsx)(b.Z,{className:"h-4 w-4 opacity-50"})})]})});E.displayName=v.xz.displayName;let C=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(v.u_,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,t.jsx)(N.Z,{className:"h-4 w-4"})})});C.displayName=v.u_.displayName;let S=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(v.$G,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,t.jsx)(b.Z,{className:"h-4 w-4"})})});S.displayName=v.$G.displayName;let Z=r.forwardRef((e,a)=>{let{className:s,children:r,position:l="popper",...i}=e;return(0,t.jsx)(v.h_,{children:(0,t.jsxs)(v.VY,{ref:a,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...i,children:[(0,t.jsx)(C,{}),(0,t.jsx)(v.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(S,{})]})})});Z.displayName=v.VY.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(v.__,{ref:a,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",s),...r})}).displayName=v.__.displayName;let k=r.forwardRef((e,a)=>{let{className:s,children:r,...l}=e;return(0,t.jsxs)(v.ck,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,t.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(v.wU,{children:(0,t.jsx)(w.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(v.eT,{children:r})]})});k.displayName=v.ck.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(v.Z0,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=v.Z0.displayName;var q=s(8752),z=s(8736),A=s(3229),I=s(7689),O=s(5900),D=s(2489),R=s(9397),T=s(8728),Y=s(7692),M=s(6221),Q=s(44),B=s(5805),V=s(91),F=s(8896),P=s(2252),U=s(2735),G=s(2208),J=s(3247),H=s(5868),X=s(8930);function L(){let{user:e,profile:a,signOut:s}=(0,l.a)(),{toast:c}=(0,q.pm)(),[d,j]=(0,r.useState)("overview"),[v,b]=(0,r.useState)(""),[N,w]=(0,r.useState)("todos"),[C,S]=(0,r.useState)("todas"),[L,K]=(0,r.useState)([]),[W,$]=(0,r.useState)([]),[ee,ea]=(0,r.useState)([]),[es,et]=(0,r.useState)([]),[er,el]=(0,r.useState)(!0),[ei,en]=(0,r.useState)({totalQuestoes:0,totalCargos:0,totalUsuarios:0,totalSimulados:0,questoesPorBanca:{},questoesPorArea:{},acessosRecentes:0}),[eo,ec]=(0,r.useState)({cargo_id:"",area_id:"",enunciado:"",alternativa_a:"",alternativa_b:"",alternativa_c:"",alternativa_d:"",alternativa_e:"",resposta_correta:"",feedback:"",dificuldade:2,fonte:""}),[ed,eu]=(0,r.useState)(!1),[em,ex]=(0,r.useState)({nome:"",descricao:"",orgao:"",banca:"HC ASSESSORIA",nivel_escolaridade:"Ensino M\xe9dio"}),[eh,ef]=(0,r.useState)(!1),[ep,ej]=(0,r.useState)(!1),[eg,ev]=(0,r.useState)({nome:"",descricao:""}),[eb,eN]=(0,r.useState)(!1),[ew,ey]=(0,r.useState)(!1),e_=(0,r.useMemo)(()=>new g,[]);(0,r.useEffect)(()=>{eE()},[e_]);let eE=async()=>{el(!0);try{console.log("\uD83D\uDCCA Carregando dados do dashboard admin...");let[e,a,s,t]=await Promise.all([e_.buscarEstatisticas(),e_.buscarCargos(),e_.buscarAreas(),e_.buscarBancas()]);console.log("✅ Dados carregados:",{stats:e,cargos:a.length,areas:s.length,bancas:t.length}),en(e),$(a),ea(s),et(t)}catch(e){console.error("❌ Erro ao carregar dados do admin:",e),c({title:"Erro",description:"Erro ao carregar dados do dashboard",variant:"destructive"})}finally{el(!1)}},eC=async()=>{await s()},eS=async()=>{if(!eo.cargo_id||!eo.area_id||!eo.enunciado||!eo.alternativa_a||!eo.alternativa_b||!eo.alternativa_c||!eo.alternativa_d||!eo.resposta_correta||!eo.feedback){c({title:"Erro",description:"Preencha todos os campos obrigat\xf3rios",variant:"destructive"});return}eu(!0);try{await e_.criarQuestao({cargo_id:parseInt(eo.cargo_id),area_id:parseInt(eo.area_id),enunciado:eo.enunciado,alternativa_a:eo.alternativa_a,alternativa_b:eo.alternativa_b,alternativa_c:eo.alternativa_c,alternativa_d:eo.alternativa_d,alternativa_e:eo.alternativa_e||void 0,resposta_correta:eo.resposta_correta,feedback:eo.feedback,dificuldade:eo.dificuldade,fonte:eo.fonte||void 0}),c({title:"Sucesso!",description:"Quest\xe3o criada com sucesso!"}),ec({cargo_id:"",area_id:"",enunciado:"",alternativa_a:"",alternativa_b:"",alternativa_c:"",alternativa_d:"",alternativa_e:"",resposta_correta:"",feedback:"",dificuldade:2,fonte:""}),await eE()}catch(e){console.error("Erro ao criar quest\xe3o:",e),c({title:"Erro",description:"Erro ao criar quest\xe3o",variant:"destructive"})}finally{eu(!1)}},eZ=async()=>{if(!em.nome||!em.orgao){c({title:"Erro",description:"Preencha pelo menos o nome e \xf3rg\xe3o",variant:"destructive"});return}ef(!0);try{await e_.criarCargo(em),c({title:"Sucesso!",description:"Cargo criado com sucesso!"}),ex({nome:"",descricao:"",orgao:"",banca:"HC ASSESSORIA",nivel_escolaridade:"Ensino M\xe9dio"}),ej(!1),await eE()}catch(e){console.error("Erro ao criar cargo:",e),c({title:"Erro",description:"Erro ao criar cargo",variant:"destructive"})}finally{ef(!1)}};return er?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:(0,t.jsx)(n.Zb,{className:"w-96",children:(0,t.jsxs)(n.aY,{className:"p-8 text-center",children:[(0,t.jsx)(T.Z,{className:"h-12 w-12 mx-auto mb-4 text-blue-600 animate-spin"}),(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Carregando Dashboard"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Buscando dados do sistema..."})]})})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(T.Z,{className:"h-8 w-8 text-blue-600"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin CMS"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Gerencie quest\xf5es, cargos e bancas"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(o.C,{className:"bg-red-100 text-red-800",children:"Administrador"}),(0,t.jsxs)("div",{className:"text-right text-sm",children:[(0,t.jsx)("p",{className:"font-medium",children:(null==a?void 0:a.nome)||(null==e?void 0:e.email)}),(0,t.jsx)("p",{className:"text-gray-500",children:"\xdaltimo acesso: Hoje"})]}),(0,t.jsxs)(i.z,{variant:"outline",onClick:eC,className:"flex items-center space-x-2",children:[(0,t.jsx)(Y.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Sair"})]})]})]})})}),(0,t.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)(u,{value:d,onValueChange:j,className:"space-y-6",children:[(0,t.jsxs)(m,{className:"grid w-full grid-cols-6",children:[(0,t.jsxs)(x,{value:"overview",className:"flex items-center space-x-2",children:[(0,t.jsx)(M.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Dashboard"})]}),(0,t.jsxs)(x,{value:"questoes",className:"flex items-center space-x-2",children:[(0,t.jsx)(z.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Quest\xf5es"})]}),(0,t.jsxs)(x,{value:"cargos",className:"flex items-center space-x-2",children:[(0,t.jsx)(O.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Cargos"})]}),(0,t.jsxs)(x,{value:"bancas",className:"flex items-center space-x-2",children:[(0,t.jsx)(Q.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Bancas"})]}),(0,t.jsxs)(x,{value:"usuarios",className:"flex items-center space-x-2",children:[(0,t.jsx)(B.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Usu\xe1rios"})]}),(0,t.jsxs)(x,{value:"backup",className:"flex items-center space-x-2",children:[(0,t.jsx)(V.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Backup"})]})]}),(0,t.jsxs)(h,{value:"overview",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Total Quest\xf5es"}),(0,t.jsx)(z.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:ei.totalQuestoes}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sistema de simulados"})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Cargos Ativos"}),(0,t.jsx)(O.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:ei.totalCargos}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cargos configurados"})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Usu\xe1rios"}),(0,t.jsx)(B.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:ei.totalUsuarios}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Usu\xe1rios cadastrados"})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:"Simulados"}),(0,t.jsx)(F.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:ei.totalSimulados}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Realizados no total"})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{children:"Quest\xf5es por \xc1rea"})}),(0,t.jsx)(n.aY,{children:(0,t.jsx)("div",{className:"space-y-4",children:Object.entries(ei.questoesPorArea).length>0?Object.entries(ei.questoesPorArea).map(e=>{let[a,s]=e;return(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:a}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-20 h-2 bg-gray-200 rounded-full",children:(0,t.jsx)("div",{className:"h-2 bg-blue-600 rounded-full",style:{width:"".concat(ei.totalQuestoes>0?s/ei.totalQuestoes*100:0,"%")}})}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:s})]})]},a)}):(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(P.Z,{className:"h-8 w-8 mx-auto mb-2"}),(0,t.jsx)("p",{children:"Nenhuma quest\xe3o cadastrada ainda"})]})})})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{children:"A\xe7\xf5es R\xe1pidas"})}),(0,t.jsxs)(n.aY,{className:"space-y-3",children:[(0,t.jsxs)(i.z,{className:"w-full justify-start",onClick:()=>j("questoes"),children:[(0,t.jsx)(R.Z,{className:"h-4 w-4 mr-2"}),"Nova Quest\xe3o"]}),(0,t.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",onClick:()=>j("cargos"),children:[(0,t.jsx)(O.Z,{className:"h-4 w-4 mr-2"}),"Novo Cargo"]}),(0,t.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",children:[(0,t.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Upload em Lote"]}),(0,t.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",children:[(0,t.jsx)(U.Z,{className:"h-4 w-4 mr-2"}),"Exportar Quest\xf5es"]})]})]})]})]}),(0,t.jsxs)(h,{value:"questoes",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Gest\xe3o de Quest\xf5es"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(i.z,{variant:"outline",children:[(0,t.jsx)(G.Z,{className:"h-4 w-4 mr-2"}),"Visualizar Quest\xf5es"]}),(0,t.jsxs)(i.z,{onClick:()=>j("questoes"),children:[(0,t.jsx)(R.Z,{className:"h-4 w-4 mr-2"}),"Nova Quest\xe3o"]})]})]}),(0,t.jsx)(n.Zb,{children:(0,t.jsx)(n.aY,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-64 relative",children:[(0,t.jsx)(J.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)(f,{placeholder:"Buscar quest\xf5es...",value:v,onChange:e=>b(e.target.value),className:"pl-10"})]}),(0,t.jsxs)(y,{value:N,onValueChange:w,children:[(0,t.jsx)(E,{className:"w-48",children:(0,t.jsx)(_,{placeholder:"Filtrar por cargo"})}),(0,t.jsxs)(Z,{children:[(0,t.jsx)(k,{value:"todos",children:"Todos os cargos"}),W.map(e=>(0,t.jsx)(k,{value:e.id.toString(),children:e.nome},e.id))]})]}),(0,t.jsxs)(y,{value:C,onValueChange:S,children:[(0,t.jsx)(E,{className:"w-48",children:(0,t.jsx)(_,{placeholder:"Filtrar por \xe1rea"})}),(0,t.jsxs)(Z,{children:[(0,t.jsx)(k,{value:"todas",children:"Todas as \xe1reas"}),ee.map(e=>(0,t.jsx)(k,{value:e.id.toString(),children:e.nome},e.id))]})]})]})})}),(0,t.jsx)(()=>(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"flex items-center space-x-2",children:[(0,t.jsx)(z.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Nova Quest\xe3o"})]})}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Cargo *"}),(0,t.jsxs)(y,{value:eo.cargo_id,onValueChange:e=>ec({...eo,cargo_id:e}),children:[(0,t.jsx)(E,{children:(0,t.jsx)(_,{placeholder:"Selecione o cargo"})}),(0,t.jsx)(Z,{children:W.map(e=>(0,t.jsx)(k,{value:e.id.toString(),children:e.nome},e.id))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"\xc1rea *"}),(0,t.jsxs)(y,{value:eo.area_id,onValueChange:e=>ec({...eo,area_id:e}),children:[(0,t.jsx)(E,{children:(0,t.jsx)(_,{placeholder:"Selecione a \xe1rea"})}),(0,t.jsx)(Z,{children:ee.map(e=>(0,t.jsx)(k,{value:e.id.toString(),children:e.nome},e.id))})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Enunciado *"}),(0,t.jsx)(p,{placeholder:"Digite o enunciado da quest\xe3o...",className:"min-h-32",value:eo.enunciado,onChange:e=>ec({...eo,enunciado:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Alternativas *"}),(0,t.jsx)(f,{placeholder:"A) ",value:eo.alternativa_a,onChange:e=>ec({...eo,alternativa_a:e.target.value})}),(0,t.jsx)(f,{placeholder:"B) ",value:eo.alternativa_b,onChange:e=>ec({...eo,alternativa_b:e.target.value})}),(0,t.jsx)(f,{placeholder:"C) ",value:eo.alternativa_c,onChange:e=>ec({...eo,alternativa_c:e.target.value})}),(0,t.jsx)(f,{placeholder:"D) ",value:eo.alternativa_d,onChange:e=>ec({...eo,alternativa_d:e.target.value})}),(0,t.jsx)(f,{placeholder:"E) (opcional)",value:eo.alternativa_e,onChange:e=>ec({...eo,alternativa_e:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Resposta Correta *"}),(0,t.jsxs)(y,{value:eo.resposta_correta,onValueChange:e=>ec({...eo,resposta_correta:e}),children:[(0,t.jsx)(E,{children:(0,t.jsx)(_,{placeholder:"Resposta correta"})}),(0,t.jsxs)(Z,{children:[(0,t.jsx)(k,{value:"A",children:"A"}),(0,t.jsx)(k,{value:"B",children:"B"}),(0,t.jsx)(k,{value:"C",children:"C"}),(0,t.jsx)(k,{value:"D",children:"D"}),eo.alternativa_e&&(0,t.jsx)(k,{value:"E",children:"E"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Feedback/Explica\xe7\xe3o *"}),(0,t.jsx)(p,{placeholder:"Explique por que esta \xe9 a resposta correta...",className:"min-h-24",value:eo.feedback,onChange:e=>ec({...eo,feedback:e.target.value})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Dificuldade"}),(0,t.jsxs)(y,{value:eo.dificuldade.toString(),onValueChange:e=>ec({...eo,dificuldade:parseInt(e)}),children:[(0,t.jsx)(E,{children:(0,t.jsx)(_,{placeholder:"Dificuldade"})}),(0,t.jsxs)(Z,{children:[(0,t.jsx)(k,{value:"1",children:"1 - Muito F\xe1cil"}),(0,t.jsx)(k,{value:"2",children:"2 - F\xe1cil"}),(0,t.jsx)(k,{value:"3",children:"3 - M\xe9dio"}),(0,t.jsx)(k,{value:"4",children:"4 - Dif\xedcil"}),(0,t.jsx)(k,{value:"5",children:"5 - Muito Dif\xedcil"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Fonte"}),(0,t.jsx)(f,{placeholder:"Ex: Prova anterior 2023",value:eo.fonte,onChange:e=>ec({...eo,fonte:e.target.value})})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2 pt-4",children:[(0,t.jsx)(i.z,{className:"flex-1",onClick:eS,disabled:ed,children:ed?(0,t.jsx)(t.Fragment,{children:"Criando..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.Z,{className:"h-4 w-4 mr-2"}),"Criar Quest\xe3o"]})}),(0,t.jsxs)(i.z,{variant:"outline",children:[(0,t.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Upload em Lote"]})]})]})]}),{}),0===ei.totalQuestoes&&(0,t.jsx)(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"py-12 text-center",children:[(0,t.jsx)(z.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Nenhuma quest\xe3o cadastrada"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Comece criando sua primeira quest\xe3o usando o formul\xe1rio acima."})]})})]}),(0,t.jsxs)(h,{value:"cargos",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Gest\xe3o de Cargos"}),(0,t.jsxs)(i.z,{onClick:()=>ej(!0),children:[(0,t.jsx)(R.Z,{className:"h-4 w-4 mr-2"}),"Novo Cargo"]})]}),(0,t.jsx)(()=>(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(O.Z,{className:"h-5 w-5"}),(0,t.jsx)("span",{children:"Novo Cargo"})]}),(0,t.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>ej(!ep),children:ep?(0,t.jsx)(D.Z,{className:"h-4 w-4"}):(0,t.jsx)(R.Z,{className:"h-4 w-4"})})]})}),ep&&(0,t.jsxs)(n.aY,{className:"space-y-4",children:[(0,t.jsx)(f,{placeholder:"Nome do cargo *",value:em.nome,onChange:e=>ex({...em,nome:e.target.value})}),(0,t.jsx)(p,{placeholder:"Descri\xe7\xe3o do cargo",value:em.descricao,onChange:e=>ex({...em,descricao:e.target.value})}),(0,t.jsx)(f,{placeholder:"\xd3rg\xe3o *",value:em.orgao,onChange:e=>ex({...em,orgao:e.target.value})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)(f,{placeholder:"Banca",value:em.banca,onChange:e=>ex({...em,banca:e.target.value})}),(0,t.jsxs)(y,{value:em.nivel_escolaridade,onValueChange:e=>ex({...em,nivel_escolaridade:e}),children:[(0,t.jsx)(E,{children:(0,t.jsx)(_,{placeholder:"Escolaridade"})}),(0,t.jsxs)(Z,{children:[(0,t.jsx)(k,{value:"Ensino Fundamental",children:"Ensino Fundamental"}),(0,t.jsx)(k,{value:"Ensino M\xe9dio",children:"Ensino M\xe9dio"}),(0,t.jsx)(k,{value:"Ensino Superior",children:"Ensino Superior"}),(0,t.jsx)(k,{value:"P\xf3s-gradua\xe7\xe3o",children:"P\xf3s-gradua\xe7\xe3o"})]})]})]}),(0,t.jsx)(i.z,{onClick:eZ,disabled:eh,className:"w-full",children:eh?"Criando...":"Criar Cargo"})]})]}),{}),(0,t.jsx)("div",{className:"grid gap-4",children:W.length>0?W.map(e=>(0,t.jsx)(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"flex items-center justify-between p-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:e.nome}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.nivel_escolaridade," • ",e.banca," • ",e.orgao]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.questoes_count||0," quest\xf5es cadastradas"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(o.C,{variant:e.ativo?"default":"secondary",children:e.ativo?"Ativo":"Inativo"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(i.z,{variant:"outline",size:"sm",children:(0,t.jsx)(H.Z,{className:"h-4 w-4"})}),(0,t.jsx)(i.z,{variant:"outline",size:"sm",children:(0,t.jsx)(T.Z,{className:"h-4 w-4"})})]})]})]})},e.id)):(0,t.jsx)(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"py-12 text-center",children:[(0,t.jsx)(O.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Nenhum cargo cadastrado"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Crie o primeiro cargo para come\xe7ar a adicionar quest\xf5es."})]})})})]}),(0,t.jsxs)(h,{value:"bancas",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Gest\xe3o de Bancas"}),(0,t.jsxs)(i.z,{children:[(0,t.jsx)(R.Z,{className:"h-4 w-4 mr-2"}),"Nova Banca"]})]}),(0,t.jsx)("div",{className:"grid gap-4",children:es.length>0?es.map((e,a)=>(0,t.jsx)(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"flex items-center justify-between p-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:e.nome}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.questoes," quest\xf5es • ",e.cargos," cargos"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(o.C,{variant:e.ativa?"default":"secondary",children:e.ativa?"Ativa":"Inativa"}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(i.z,{variant:"outline",size:"sm",children:(0,t.jsx)(H.Z,{className:"h-4 w-4"})}),(0,t.jsx)(i.z,{variant:"outline",size:"sm",children:(0,t.jsx)(X.Z,{className:"h-4 w-4"})})]})]})]})},a)):(0,t.jsx)(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"py-12 text-center",children:[(0,t.jsx)(Q.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Nenhuma banca encontrada"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"As bancas s\xe3o criadas automaticamente quando voc\xea adiciona cargos."})]})})})]}),(0,t.jsxs)(h,{value:"usuarios",className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Gest\xe3o de Usu\xe1rios"}),(0,t.jsx)(n.Zb,{children:(0,t.jsxs)(n.aY,{className:"py-12 text-center",children:[(0,t.jsx)(B.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Funcionalidade em desenvolvimento"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Em breve voc\xea poder\xe1 gerenciar usu\xe1rios, permiss\xf5es e acessos."})]})})]}),(0,t.jsxs)(h,{value:"backup",className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Backup e Exporta\xe7\xe3o"}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{children:"Exportar Dados"})}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[(0,t.jsxs)(i.z,{className:"w-full",children:[(0,t.jsx)(U.Z,{className:"h-4 w-4 mr-2"}),"Exportar Todas as Quest\xf5es (CSV)"]}),(0,t.jsxs)(i.z,{variant:"outline",className:"w-full",children:[(0,t.jsx)(U.Z,{className:"h-4 w-4 mr-2"}),"Exportar Estat\xedsticas"]})]})]}),(0,t.jsxs)(n.Zb,{children:[(0,t.jsx)(n.Ol,{children:(0,t.jsx)(n.ll,{children:"Backup do Sistema"})}),(0,t.jsxs)(n.aY,{className:"space-y-4",children:[(0,t.jsxs)(i.z,{className:"w-full",children:[(0,t.jsx)(V.Z,{className:"h-4 w-4 mr-2"}),"Fazer Backup Completo"]}),(0,t.jsxs)(i.z,{variant:"outline",className:"w-full",children:[(0,t.jsx)(I.Z,{className:"h-4 w-4 mr-2"}),"Restaurar Backup"]})]})]})]})]})]})})]})}},9174:function(e,a,s){s.d(a,{C:function(){return n}});var t=s(7437);s(2265);var r=s(535),l=s(3448);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:a,variant:s,...r}=e;return(0,t.jsx)("div",{className:(0,l.cn)(i({variant:s}),a),...r})}},2381:function(e,a,s){s.d(a,{z:function(){return c}});var t=s(7437),r=s(2265),l=s(7053),i=s(535),n=s(3448);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,a)=>{let{className:s,variant:r,size:i,asChild:c=!1,...d}=e,u=c?l.g7:"button";return(0,t.jsx)(u,{className:(0,n.cn)(o({variant:r,size:i,className:s})),ref:a,...d})});c.displayName="Button"},9820:function(e,a,s){s.d(a,{Ol:function(){return n},Zb:function(){return i},aY:function(){return c},ll:function(){return o}});var t=s(7437),r=s(2265),l=s(3448);let i=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let n=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});n.displayName="CardHeader";let o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})}).displayName="CardDescription";let c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},8752:function(e,a,s){s.d(a,{pm:function(){return m}});var t=s(2265);let r=0,l=new Map,i=e=>{if(l.has(e))return;let a=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,a)},n=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=a;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},o=[],c={toasts:[]};function d(e){c=n(c,e),o.forEach(e=>{e(c)})}function u(e){let{...a}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...a,id:s,open:!0,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,a]=t.useState(c);return t.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},5648:function(e,a,s){s.d(a,{H:function(){return n},a:function(){return o}});var t=s(7437),r=s(2265),l=s(5526);let i=(0,r.createContext)({});function n(e){let{children:a}=e,[s,n]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),m=(0,l.e)();(0,r.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:a}=await m.auth.getSession();a?(console.error("Erro ao obter sess\xe3o:",a),n(null),c(null)):(null==e?void 0:e.user)?(n(e.user),await x(e.user.id)):(n(null),c(null))}catch(e){console.error("Erro na verifica\xe7\xe3o inicial:",e),n(null),c(null)}finally{u(!1)}})();let{data:{subscription:e}}=m.auth.onAuthStateChange(async(e,a)=>{var s;console.log("Auth state change:",e,null==a?void 0:null===(s=a.user)||void 0===s?void 0:s.email),(null==a?void 0:a.user)?(n(a.user),await x(a.user.id)):(n(null),c(null)),u(!1)});return()=>{e.unsubscribe()}},[]);let x=async e=>{try{let{data:r,error:l}=await m.from("profiles").select("*").eq("id",e).single();if(l&&"PGRST116"===l.code){var a,t;let{data:r,error:l}=await m.from("profiles").insert([{id:e,email:(null==s?void 0:s.email)||"",nome:(null==s?void 0:null===(a=s.user_metadata)||void 0===a?void 0:a.nome)||(null==s?void 0:null===(t=s.email)||void 0===t?void 0:t.split("@")[0])||"",plano:"gratuito"}]).select().single();l?console.error("Erro ao criar profile:",l):c(r)}else l?console.error("Erro ao carregar profile:",l):(c(r),await m.from("profiles").update({ultimo_acesso:new Date().toISOString()}).eq("id",e))}catch(e){console.error("Erro ao carregar profile:",e)}},h=async(e,a)=>{try{let{error:s}=await m.auth.signInWithPassword({email:e,password:a});return{error:s}}catch(e){return{error:e}}},f=async(e,a,s)=>{try{let{error:t}=await m.auth.signUp({email:e,password:a,options:{data:{nome:s}}});return{error:t}}catch(e){return{error:e}}},p=async()=>{try{await m.auth.signOut(),n(null),c(null),window.location.href="/"}catch(e){console.error("Erro ao fazer logout:",e)}};return(0,t.jsx)(i.Provider,{value:{user:s,profile:o,signOut:p,signIn:h,signUp:f,loading:d},children:a})}let o=()=>{let e=(0,r.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},5526:function(e,a,s){s.d(a,{e:function(){return n}});var t=s(8439);let r="https://wqhkcyscozpruhwylhar.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndxaGtjeXNjb3pwcnVod3lsaGFyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3NzcyMzcsImV4cCI6MjA3MzM1MzIzN30.gFMB7xdShbvwPDoxwni_ijSa_zJ2w8s5B1BwUbHKyK0";if(!r||!l)throw Error("Missing Supabase environment variables");let i=(0,t.eI)(r,l),n=()=>i},3448:function(e,a,s){s.d(a,{cn:function(){return l}});var t=s(1994),r=s(3335);function l(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,r.m6)((0,t.W)(a))}}}]);