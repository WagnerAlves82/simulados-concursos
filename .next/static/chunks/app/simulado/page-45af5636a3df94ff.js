(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[877],{9741:function(e,a,s){Promise.resolve().then(s.bind(s,1849))},2252:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(9763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2660:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1769:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(9763).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},6901:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(9763).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},5863:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7692:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(9763).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3276:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(9763).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},2369:function(e,a,s){"use strict";s.d(a,{Z:function(){return r}});let r=(0,s(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},7648:function(e,a,s){"use strict";s.d(a,{default:function(){return t.a}});var r=s(2972),t=s.n(r)},1849:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return D}});var r=s(7437),t=s(2265),o=s(7648),n=s(2381),l=s(9820),i=s(9174),c=s(5648),d=s(5526);class u{async buscarQuestoesPorCargo(e){if(!e)throw Error("cargoId \xe9 obrigat\xf3rio");try{let a;console.log("Iniciando busca por cargoId:",e);let{data:s,error:r}=await this.supabase.from("questoes").select("*").eq("cargo_id",e).eq("ativo",!0).order("area_id").order("id");if(r)throw console.error("Erro na query de quest\xf5es:",r),Error(r.message);if(!s||0===s.length)return console.log("Nenhuma quest\xe3o encontrada para o cargo:",e),{questoes:[],areas:[],total:0};console.log("Quest\xf5es encontradas: ".concat(s.length));let{data:t,error:o}=await this.supabase.from("areas_conhecimento").select("*").order("id");o&&console.error("Erro ao buscar todas as \xe1reas:",o),console.log("Total de \xe1reas no banco: ".concat((null==t?void 0:t.length)||0));let n=[...new Set(s.map(e=>e.area_id).filter(e=>null!==e))];console.log("Area IDs usados pelas quest\xf5es:",n);let{data:l,error:i}=await this.supabase.from("areas_conhecimento").select("*").in("id",n);i&&console.error("Erro na query de areas_conhecimento:",i),console.log("\xc1reas encontradas para as quest\xf5es: ".concat((null==l?void 0:l.length)||0));let{data:c,error:d}=await this.supabase.from("cargo_areas").select("*").eq("cargo_id",e);d&&console.error("Erro na query de cargo_areas:",d),console.log("Configura\xe7\xf5es cargo_areas encontradas: ".concat((null==c?void 0:c.length)||0));let u=(null==l?void 0:l.reduce((e,a)=>(e[a.id]=a.nome,e),{}))||{},m=(null==c?void 0:c.reduce((e,a)=>(e[a.area_id]={numero_questoes:a.numero_questoes,peso:a.peso||1},e),{}))||{},h=s.map(e=>{var a;return{...e,area_nome:u[e.area_id]||"\xc1rea ".concat(e.area_id)||0,peso_area:(null===(a=m[e.area_id])||void 0===a?void 0:a.peso)||1}});return a=c&&c.length>0?c.map(e=>({id:e.area_id,nome:u[e.area_id]||"\xc1rea ".concat(e.area_id),total_questoes:e.numero_questoes,peso:e.peso||1,questoes_respondidas:0,acertos:0,percentual:0})):n.map(e=>{let a=s.filter(a=>a.area_id===e);return{id:e,nome:u[e]||"\xc1rea ".concat(e),total_questoes:a.length,peso:1,questoes_respondidas:0,acertos:0,percentual:0}}),console.log("Busca conclu\xedda: ".concat(h.length," quest\xf5es, ").concat(a.length," \xe1reas")),{questoes:h,areas:a,total:h.length}}catch(e){throw console.error("Erro geral ao buscar quest\xf5es:",e),e}}async buscarQuestoesPorArea(e,a,s){try{let r=this.supabase.from("questoes").select("*").eq("cargo_id",e).eq("area_id",a).eq("ativo",!0).order("id");s&&(r=r.limit(s));let{data:t,error:o}=await r;if(o)throw Error(o.message);if(!t||0===t.length)return[];let{data:n,error:l}=await this.supabase.from("areas_conhecimento").select("nome").eq("id",a).single();l&&console.warn("Erro ao buscar nome da \xe1rea:",l);let{data:i,error:c}=await this.supabase.from("cargo_areas").select("peso").eq("cargo_id",e).eq("area_id",a).single();return c&&console.warn("Erro ao buscar configura\xe7\xe3o da \xe1rea:",c),t.map(e=>({...e,area_nome:(null==n?void 0:n.nome)||"\xc1rea Desconhecida",peso_area:(null==i?void 0:i.peso)||1}))}catch(e){throw console.error("Erro ao buscar quest\xf5es por \xe1rea:",e),e}}async gerarSimuladoPersonalizado(e){try{console.log("\uD83C\uDFAF Iniciando gera\xe7\xe3o do simulado para cargo:",e);let{data:a,error:s}=await this.supabase.from("questoes").select("*").eq("cargo_id",e).eq("ativo",!0);if(s)throw console.error("Erro ao buscar quest\xf5es:",s),Error(s.message);if(!a||0===a.length)return console.warn("Nenhuma quest\xe3o encontrada para o cargo"),[];console.log("\uD83D\uDCDA Total de quest\xf5es dispon\xedveis: ".concat(a.length));let{data:r,error:t}=await this.supabase.from("cargo_areas").select("area_id, numero_questoes").eq("cargo_id",e);if(t&&console.error("Erro ao buscar configura\xe7\xe3o:",t),console.log("⚙️ Configura\xe7\xf5es encontradas: ".concat((null==r?void 0:r.length)||0)),!r||0===r.length){console.log("\uD83D\uDCCB Sem configura\xe7\xe3o espec\xedfica, usando todas as quest\xf5es embaralhadas");let e=[...new Set(a.map(e=>e.area_id))],{data:s}=await this.supabase.from("areas_conhecimento").select("*").in("id",e),r=(null==s?void 0:s.reduce((e,a)=>(e[a.id]=a.nome,e),{}))||{},t=a.map(e=>({...e,area_nome:r[e.area_id]||"\xc1rea ".concat(e.area_id),peso_area:1})),o=this.embaralharArray(t).slice(0,120);return console.log("✅ Simulado gerado sem configura\xe7\xe3o: ".concat(o.length," quest\xf5es")),o}let{data:o}=await this.supabase.from("areas_conhecimento").select("*"),{data:n}=await this.supabase.from("cargo_areas").select("*").eq("cargo_id",e),l=(null==o?void 0:o.reduce((e,a)=>(e[a.id]=a.nome,e),{}))||{},i=(null==n?void 0:n.reduce((e,a)=>(e[a.area_id]=a.peso||1,e),{}))||{},c=a.map(e=>({...e,area_nome:l[e.area_id]||"\xc1rea ".concat(e.area_id),peso_area:i[e.area_id]||1})),d=[];for(let e of r){let a=c.filter(a=>a.area_id===e.area_id);if(console.log("\uD83D\uDCCA \xc1rea ".concat(e.area_id,": ").concat(a.length," quest\xf5es dispon\xedveis, ").concat(e.numero_questoes," solicitadas")),a.length>0){let s=this.embaralharArray(a).slice(0,e.numero_questoes);d.push(...s),console.log("✅ Selecionadas ".concat(s.length," quest\xf5es da \xe1rea ").concat(e.area_id))}else console.warn("⚠️ Nenhuma quest\xe3o encontrada para \xe1rea ".concat(e.area_id))}let u=this.embaralharArray(d);return console.log("\uD83C\uDF89 Simulado final gerado: ".concat(u.length," quest\xf5es")),console.log("\uD83D\uDCCB Distribui\xe7\xe3o por \xe1rea:",u.reduce((e,a)=>(e[a.area_nome]=(e[a.area_nome]||0)+1,e),{})),u}catch(e){throw console.error("❌ Erro ao gerar simulado:",e),e}}async testarConexao(){try{console.log("Testando conex\xe3o com Supabase...");let{data:e,error:a}=await this.supabase.from("questoes").select("id").limit(1);if(a)throw console.error("Erro de conex\xe3o:",{message:a.message,code:a.code,details:a.details,hint:a.hint}),a;return console.log("Conex\xe3o bem-sucedida, dados retornados:",e),!0}catch(e){throw console.error("Erro geral na conex\xe3o:",e),e}}async buscarEstatisticasUsuario(e,a){try{let{data:s,error:r}=await this.supabase.from("estatisticas_areas").select("*").eq("user_id",e).eq("cargo_id",a);if(r)throw Error(r.message);if(!s||0===s.length)return[];let t=s.map(e=>e.area_id),{data:o,error:n}=await this.supabase.from("areas_conhecimento").select("*").in("id",t);n&&console.warn("Erro ao buscar \xe1reas:",n);let{data:l,error:i}=await this.supabase.from("cargo_areas").select("*").eq("cargo_id",a).in("area_id",t);i&&console.warn("Erro ao buscar configura\xe7\xe3o das \xe1reas:",i);let c=(null==o?void 0:o.reduce((e,a)=>(e[a.id]=a.nome,e),{}))||{},d=(null==l?void 0:l.reduce((e,a)=>(e[a.area_id]=a.peso||1,e),{}))||{};return s.map(e=>({id:e.area_id,nome:c[e.area_id]||"\xc1rea Desconhecida",total_questoes:e.total_questoes||0,peso:d[e.area_id]||1,questoes_respondidas:e.total_questoes||0,acertos:e.acertos||0,percentual:e.percentual||0}))}catch(e){throw console.error("Erro ao buscar estat\xedsticas:",e),e}}async salvarResultadoSimulado(e,a,s,r,t){try{let o=0,n=0,l=0;s.forEach(e=>{n+=e.peso_area,r[e.id]===e.resposta_correta&&(l++,o+=e.peso_area)});let i=l/s.length*100,{data:c,error:d}=await this.supabase.from("simulados").insert({user_id:e,cargo_id:a,tipo:"personalizado",status:"concluido",data_conclusao:new Date().toISOString(),tempo_gasto:t,pontuacao_total:o,percentual_acertos:i}).select("id").single();if(d)throw Error(d.message);let u=s.map((e,a)=>({simulado_id:c.id,questao_id:e.id,ordem:a+1,resposta_usuario:r[e.id]||null,correta:r[e.id]===e.resposta_correta,tempo_resposta:Math.floor(t/s.length)})),{error:m}=await this.supabase.from("simulado_questoes").insert(u);if(m)throw Error(m.message);return await this.atualizarEstatisticasAreas(e,a,s,r),c.id}catch(e){throw console.error("Erro ao salvar resultado:",e),e}}async atualizarEstatisticasAreas(e,a,s,r){for(let[t,o]of Object.entries(s.reduce((e,a)=>(e[a.area_id]||(e[a.area_id]=[]),e[a.area_id].push(a),e),{}))){let s=parseInt(t),n=o.filter(e=>r[e.id]===e.resposta_correta).length,l=o.length,{data:i}=await this.supabase.from("estatisticas_areas").select("*").eq("user_id",e).eq("cargo_id",a).eq("area_id",s).single();if(i){let e=i.total_questoes+l,a=i.acertos+n,s=a/e*100;await this.supabase.from("estatisticas_areas").update({total_questoes:e,acertos:a,percentual:s,ultima_atualizacao:new Date().toISOString()}).eq("id",i.id)}else{let r=n/l*100;await this.supabase.from("estatisticas_areas").insert({user_id:e,cargo_id:a,area_id:s,total_questoes:l,acertos:n,percentual:r})}}}embaralharArray(e){let a=[...e];for(let e=a.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1));[a[e],a[s]]=[a[s],a[e]]}return a}constructor(){this.supabase=(0,d.e)()}}function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{user:a}=(0,c.a)(),[s,r]=(0,t.useState)([]),[o,n]=(0,t.useState)([]),[l,i]=(0,t.useState)(!0),[d,m]=(0,t.useState)(null),[h,g]=(0,t.useState)(null),x=(0,t.useMemo)(()=>new u,[]),f=(0,t.useCallback)(async function(){let a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!a&&h===e&&s.length>0){console.log("Quest\xf5es j\xe1 carregadas para este cargo, pulando...");return}try{i(!0),m(null),console.log("\uD83D\uDD04 Carregando quest\xf5es para cargo ".concat(e,"...")),await x.testarConexao(),console.log("✅ Conex\xe3o com Supabase OK");let a=await x.buscarQuestoesPorCargo(e);console.log("\uD83D\uDCCA Resultado da busca:",{totalQuestoes:a.questoes.length,totalAreas:a.areas.length,areas:a.areas.map(e=>({id:e.id,nome:e.nome,questoes:e.total_questoes}))}),0===a.questoes.length?(console.warn("⚠️ Nenhuma quest\xe3o encontrada para o cargo ".concat(e)),m("Nenhuma quest\xe3o encontrada para o cargo selecionado")):(r(a.questoes),n(a.areas),g(e),console.log("✅ ".concat(a.questoes.length," quest\xf5es carregadas com sucesso")))}catch(e){console.error("❌ Erro ao carregar quest\xf5es:",e),e instanceof Error?e.message.includes("JWT")?m("Erro de autentica\xe7\xe3o. Fa\xe7a login novamente."):e.message.includes("network")||e.message.includes("fetch")?m("Erro de conex\xe3o. Verifique sua internet."):m("Erro ao carregar quest\xf5es: ".concat(e.message)):m("Erro desconhecido ao carregar quest\xf5es")}finally{i(!1)}},[e,h,s.length,x]);(0,t.useEffect)(()=>{e&&f()},[e,f]);let p=(0,t.useCallback)(async()=>{try{console.log("\uD83C\uDFAF Gerando simulado para cargo ".concat(e,"..."));let a=await x.gerarSimuladoPersonalizado(e);return console.log("✅ Simulado gerado: ".concat(a.length," quest\xf5es")),console.log("\uD83D\uDCCB Distribui\xe7\xe3o por \xe1rea:",a.reduce((e,a)=>(e[a.area_nome]=(e[a.area_nome]||0)+1,e),{})),a}catch(e){throw console.error("❌ Erro ao gerar simulado:",e),Error("Erro ao gerar simulado. Tente novamente.")}},[e,x]),b=(0,t.useCallback)(async(s,r,t)=>{if(!a)throw Error("Usu\xe1rio n\xe3o logado");try{console.log("\uD83D\uDCBE Salvando resultado do simulado...",{userId:a.id,cargoId:e,totalQuestoes:s.length,totalRespostas:Object.keys(r).length,tempoGasto:"".concat(Math.floor(t/60),"min ").concat(t%60,"s")});let o=await x.salvarResultadoSimulado(a.id,e,s,r,t);return console.log("✅ Resultado salvo com ID: ".concat(o)),o}catch(e){throw console.error("❌ Erro ao salvar resultado:",e),Error("Erro ao salvar resultado")}},[a,e,x]),v=(0,t.useCallback)(async()=>{if(!a)return console.log("\uD83D\uDC64 Usu\xe1rio n\xe3o logado, retornando estat\xedsticas vazias"),[];try{console.log("\uD83D\uDCC8 Carregando estat\xedsticas para usu\xe1rio ".concat(a.id,"..."));let s=await x.buscarEstatisticasUsuario(a.id,e);return console.log("✅ Estat\xedsticas carregadas:",s.map(e=>({area:e.nome,acertos:e.acertos,total:e.total_questoes,percentual:e.percentual.toFixed(1)+"%"}))),s}catch(e){return console.error("❌ Erro ao carregar estat\xedsticas:",e),[]}},[a,e,x]),j=(0,t.useCallback)(async(a,s)=>{try{console.log("\uD83D\uDD0D Buscando quest\xf5es da \xe1rea ".concat(a,"..."));let r=await x.buscarQuestoesPorArea(e,a,s);return console.log("✅ ".concat(r.length," quest\xf5es encontradas para a \xe1rea")),r}catch(e){throw console.error("❌ Erro ao buscar quest\xf5es por \xe1rea:",e),Error("Erro ao buscar quest\xf5es da \xe1rea")}},[e,x]),y=(0,t.useMemo)(()=>{if(0===s.length)return null;let e=s.reduce((e,a)=>(e[a.area_nome]=(e[a.area_nome]||0)+1,e),{});return{totalQuestoes:s.length,totalAreas:o.length,questoesPorArea:e,areasDisponiveis:o.map(e=>({id:e.id,nome:e.nome,questoes:e.total_questoes,peso:e.peso}))}},[s,o]),N=!l&&s.length>0&&o.length>0,w=(0,t.useMemo)(()=>({cargoId:e,totalQuestoes:s.length,totalAreas:o.length,lastCargoId:h,loading:l,error:d,isReady:N,questoesPorArea:s.reduce((e,a)=>(e[a.area_nome]=(e[a.area_nome]||0)+1,e),{}),areasConfiguradas:o.map(e=>({id:e.id,nome:e.nome,questoesConfiguradas:e.total_questoes,peso:e.peso})),amostraQuestoes:s.slice(0,2).map(e=>({id:e.id,area:e.area_nome,enunciado:e.enunciado.substring(0,50)+"..."}))}),[e,s,o,h,l,d,N]);return{questoes:s,areas:o,loading:l,error:d,isReady:N,estatisticas:y,gerarSimulado:p,salvarResultado:b,carregarEstatisticas:v,buscarQuestoesPorArea:j,recarregar:()=>f(!0),debug:w}}function h(){let{questoes:e,areas:a,loading:s,error:t,debug:o,estatisticas:n}=m(1);return(0,r.jsxs)("div",{className:"fixed top-4 right-4 bg-white border-2 border-red-300 p-4 rounded-lg shadow-lg max-w-sm z-50",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsx)("h3",{className:"font-bold text-red-700",children:"\uD83D\uDD0D Debug Hook"}),(0,r.jsxs)("div",{className:"text-xs bg-red-100 px-2 py-1 rounded",children:["Cargo: ",null==o?void 0:o.cargoId]})]}),(0,r.jsxs)("div",{className:"text-xs space-y-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{className:"p-2 rounded ".concat(s?"bg-yellow-100":"bg-green-100"),children:[(0,r.jsx)("div",{className:"font-medium",children:"Loading"}),(0,r.jsx)("div",{children:s?"SIM":"N\xc3O"})]}),(0,r.jsxs)("div",{className:"p-2 rounded ".concat(t?"bg-red-100":"bg-green-100"),children:[(0,r.jsx)("div",{className:"font-medium",children:"Error"}),(0,r.jsx)("div",{children:t?"SIM":"N\xc3O"})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-2 rounded",children:[(0,r.jsx)("div",{className:"font-medium mb-1",children:"Contadores:"}),(0,r.jsxs)("div",{children:["Quest\xf5es: ",(0,r.jsx)("strong",{children:e.length})]}),(0,r.jsxs)("div",{children:["\xc1reas: ",(0,r.jsx)("strong",{children:a.length})]}),(0,r.jsxs)("div",{children:["isReady: ",(0,r.jsx)("strong",{children:(null==o?void 0:o.isReady)?"SIM":"N\xc3O"})]})]}),t&&(0,r.jsxs)("div",{className:"bg-red-50 p-2 rounded border border-red-200",children:[(0,r.jsx)("div",{className:"font-medium text-red-700 mb-1",children:"Erro:"}),(0,r.jsx)("div",{className:"text-red-600 text-xs",children:t})]}),o&&(0,r.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,r.jsx)("div",{className:"font-medium mb-1",children:"Debug Info:"}),(0,r.jsxs)("div",{children:["LastCargoId: ",o.lastCargoId]}),(0,r.jsxs)("div",{children:["Total Quest\xf5es: ",o.totalQuestoes]}),(0,r.jsxs)("div",{children:["Total \xc1reas: ",o.totalAreas]})]}),(null==o?void 0:o.questoesPorArea)&&Object.keys(o.questoesPorArea).length>0&&(0,r.jsxs)("div",{className:"bg-green-50 p-2 rounded",children:[(0,r.jsx)("div",{className:"font-medium mb-1",children:"Por \xc1rea:"}),Object.entries(o.questoesPorArea).map(e=>{let[a,s]=e;return(0,r.jsxs)("div",{className:"text-xs",children:[a,": ",s]},a)})]}),(null==o?void 0:o.areasConfiguradas)&&o.areasConfiguradas.length>0&&(0,r.jsxs)("div",{className:"bg-purple-50 p-2 rounded",children:[(0,r.jsx)("div",{className:"font-medium mb-1",children:"\xc1reas Config:"}),o.areasConfiguradas.map(e=>(0,r.jsxs)("div",{className:"text-xs",children:[e.nome,": ",e.questoesConfiguradas]},e.id))]}),(null==o?void 0:o.amostraQuestoes)&&o.amostraQuestoes.length>0&&(0,r.jsxs)("div",{className:"bg-yellow-50 p-2 rounded",children:[(0,r.jsx)("div",{className:"font-medium mb-1",children:"Amostra:"}),o.amostraQuestoes.map(e=>(0,r.jsxs)("div",{className:"text-xs mb-1",children:["#",e.id," (",e.area,"): ",e.enunciado]},e.id))]}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700",children:"\uD83D\uDD04 Recarregar P\xe1gina"})]})]})}var g=s(5863),x=s(2252),f=s(9763);let p=(0,f.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var b=s(1769),v=s(2369),j=s(7692),y=s(2660),N=s(6901),w=s(3276);let _=(0,f.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),q=(0,f.Z)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),C=(0,f.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var D=()=>{let{user:e,profile:a,signOut:s}=(0,c.a)(),{questoes:d,areas:u,loading:f,error:D,gerarSimulado:E,salvarResultado:S,recarregar:k,debug:z}=m(1),[I,Z]=(0,t.useState)([]),[A,M]=(0,t.useState)(0),[P,Q]=(0,t.useState)({}),[O,F]=(0,t.useState)(14400),[R,B]=(0,t.useState)(!1),[T,H]=(0,t.useState)(!1),[L,G]=(0,t.useState)({}),[V,J]=(0,t.useState)(!1),[U,Y]=(0,t.useState)(!1),[X,K]=(0,t.useState)(!1);(0,t.useEffect)(()=>{console.log("\uD83D\uDD0D Debug SimuladoPage:",{questoesDisponiveis:d.length,areas:u.length,loading:f,error:D,debug:z})},[d,u,f,D,z]),(0,t.useEffect)(()=>{let e;return R&&O>0&&!T&&(e=setInterval(()=>{F(O-1)},1e3)),()=>clearInterval(e)},[R,O,T]);let W=async()=>{try{console.log("\uD83C\uDFAF Bot\xe3o clicado - Iniciando gera\xe7\xe3o do simulado..."),console.log("Estado atual:",{gerandoSimulado:X,questoesDisponiveis:d.length,isStarted:V}),K(!0),console.log("✅ setGerandoSimulado(true) executado");let e=await E();console.log("✅ gerarSimulado() retornou:",e.length,"quest\xf5es"),Z(e),console.log("✅ setQuestoesSimulado() executado com",e.length,"quest\xf5es"),J(!0),console.log("✅ setIsStarted(true) executado"),B(!0),console.log("✅ setIsRunning(true) executado"),console.log("\uD83C\uDF89 Todos os estados atualizados, interface deve mudar agora")}catch(e){console.error("❌ Erro ao gerar simulado:",e),alert("Erro ao gerar simulado: ".concat(e.message))}finally{K(!1),console.log("\uD83C\uDFC1 setGerandoSimulado(false) executado")}},$=(e,a)=>{Q({...P,[e]:a})},ee=async()=>{if(B(!1),H(!0),e)try{Y(!0),await S(I,P,14400-O)}catch(e){console.error("Erro ao salvar resultado:",e)}finally{Y(!1)}},ea=async()=>{await s()},es=I[A],er=T?(()=>{let e=0,a=0,s=0;I.forEach(r=>{a+=r.peso_area,P[r.id]===r.resposta_correta&&(e++,s+=r.peso_area)});let r=u.map(e=>{let a=I.filter(a=>a.area_id===e.id),s=a.filter(e=>P[e.id]===e.resposta_correta).length;return{...e,questoes_respondidas:a.length,acertos:s,percentual:a.length>0?s/a.length*100:0}});return{correct:e,total:I.length,percentage:I.length>0?e/I.length*100:0,weightedScore:a>0?s/a*100:0,porArea:r}})():null;return f?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:[(0,r.jsx)(h,{}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(g.Z,{className:"h-12 w-12 animate-spin mx-auto text-blue-600 mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"Carregando quest\xf5es..."}),(0,r.jsx)("p",{className:"text-gray-500",children:"Buscando quest\xf5es do banco de dados"})]})]}):D?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:[(0,r.jsx)(h,{}),(0,r.jsx)(l.Zb,{className:"max-w-md",children:(0,r.jsxs)(l.aY,{className:"p-6 text-center",children:[(0,r.jsx)(x.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Erro ao carregar quest\xf5es"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:D}),(0,r.jsxs)(n.z,{onClick:k,className:"mr-2",children:[(0,r.jsx)(p,{className:"h-4 w-4 mr-2"}),"Tentar novamente"]}),(0,r.jsx)(o.default,{href:"/",children:(0,r.jsx)(n.z,{variant:"outline",children:"Voltar ao in\xedcio"})})]})})]}):V?T&&er?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(o.default,{href:"/",className:"flex items-center space-x-2",children:[(0,r.jsx)(b.Z,{className:"h-6 w-6 text-blue-600"}),(0,r.jsx)("span",{className:"font-bold text-gray-900",children:"SimuladosPro"})]}),(0,r.jsxs)(i.C,{variant:"outline",children:["Quest\xe3o ",A+1," de ",I.length]}),e&&(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-600",children:[(0,r.jsx)(v.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:(null==a?void 0:a.nome)||e.email})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(_,{className:"h-5 w-5 text-gray-600"}),(0,r.jsx)("span",{className:"font-mono text-lg font-semibold",children:"".concat(Math.floor(O/3600).toString().padStart(2,"0"),":").concat(Math.floor(O%3600/60).toString().padStart(2,"0"),":").concat((O%60).toString().padStart(2,"0"))}),(0,r.jsx)(n.z,{onClick:()=>B(!R),variant:"outline",size:"sm",children:R?(0,r.jsx)(q,{className:"h-4 w-4"}):(0,r.jsx)(w.Z,{className:"h-4 w-4"})})]}),e&&(0,r.jsxs)(n.z,{variant:"outline",size:"sm",onClick:ea,children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-1"}),"Sair"]}),(0,r.jsx)(n.z,{onClick:ee,variant:"destructive",children:"Finalizar"})]})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat((A+1)/I.length*100,"%")}})})})]})}),(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[es&&(0,r.jsxs)(l.Zb,{className:"mb-6",children:[(0,r.jsx)(l.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(l.ll,{className:"text-xl",children:["Quest\xe3o ",A+1," - ",es.area_nome]}),(0,r.jsxs)(i.C,{variant:"outline",children:["Peso ",es.peso_area]})]})}),(0,r.jsxs)(l.aY,{children:[(0,r.jsx)("p",{className:"text-lg mb-6 leading-relaxed whitespace-pre-line",children:es.enunciado}),(0,r.jsx)("div",{className:"space-y-3",children:[{key:"A",value:es.alternativa_a},{key:"B",value:es.alternativa_b},{key:"C",value:es.alternativa_c},{key:"D",value:es.alternativa_d},...es.alternativa_e?[{key:"E",value:es.alternativa_e}]:[]].map(e=>{let{key:a,value:s}=e;return(0,r.jsxs)("button",{onClick:()=>$(es.id,a),className:"w-full text-left p-4 rounded-lg border-2 transition-all hover:bg-gray-50 ".concat(P[es.id]===a?"border-blue-500 bg-blue-50":"border-gray-200"),children:[(0,r.jsxs)("span",{className:"font-semibold text-blue-600",children:[a,")"]})," ",s]},a)})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(n.z,{onClick:()=>M(Math.max(0,A-1)),disabled:0===A,variant:"outline",children:[(0,r.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Anterior"]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Quest\xe3o ",A+1," de ",I.length]}),(0,r.jsxs)(n.z,{onClick:()=>M(Math.min(I.length-1,A+1)),disabled:A===I.length-1,children:["Pr\xf3xima",(0,r.jsx)(C,{className:"h-4 w-4 ml-2"})]})]}),(0,r.jsxs)(l.Zb,{className:"mt-6",children:[(0,r.jsx)(l.Ol,{children:(0,r.jsx)(l.ll,{className:"text-lg",children:"Mapa de Quest\xf5es"})}),(0,r.jsxs)(l.aY,{children:[(0,r.jsx)("div",{className:"grid grid-cols-10 gap-2",children:I.map((e,a)=>(0,r.jsx)("button",{onClick:()=>M(a),className:"w-10 h-10 rounded text-sm font-semibold ".concat(a===A?"bg-blue-600 text-white":P[I[a].id]?"bg-green-100 text-green-800 border border-green-300":"bg-gray-100 text-gray-600 border border-gray-300"),children:a+1},a))}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-6 mt-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-blue-600 rounded mr-2"}),"Atual"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-green-100 border border-green-300 rounded mr-2"}),"Respondida"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-gray-100 border border-gray-300 rounded mr-2"}),"N\xe3o respondida"]})]})]})]})]})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[(0,r.jsx)(h,{}),(0,r.jsx)(()=>(0,r.jsx)("header",{className:"container mx-auto px-4 py-6",children:(0,r.jsxs)("nav",{className:"flex items-center justify-between",children:[(0,r.jsxs)(o.default,{href:"/",className:"flex items-center space-x-2",children:[(0,r.jsx)(b.Z,{className:"h-8 w-8 text-blue-600"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"SimuladosPro"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,r.jsx)(v.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:(null==a?void 0:a.nome)||e.email})]}),(0,r.jsxs)(n.z,{variant:"outline",onClick:ea,children:[(0,r.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Sair"]})]}):(0,r.jsx)(o.default,{href:"/login",children:(0,r.jsx)(n.z,{variant:"outline",children:"Fazer Login"})}),(0,r.jsx)(o.default,{href:"/",children:(0,r.jsxs)(n.z,{variant:"outline",children:[(0,r.jsx)(y.Z,{className:"h-4 w-4 mr-2"}),"Voltar ao In\xedcio"]})})]})]})}),{}),(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,r.jsx)(i.C,{className:"mb-6 bg-green-100 text-green-800 border-green-200",children:"Simulado Gratuito"}),(0,r.jsx)("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Simulado - Agente de Educa\xe7\xe3o Infantil"}),(0,r.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"S\xe3o Louren\xe7o do Oeste/SC - HC Assessoria"}),(0,r.jsx)(l.Zb,{className:"mb-8",children:(0,r.jsx)(l.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:d.length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Quest\xf5es"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"4h"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Tempo"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:"42"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Vagas"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:"HC"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Assessoria"})]})]})})}),(0,r.jsxs)(l.Zb,{className:"mb-8",children:[(0,r.jsx)(l.Ol,{children:(0,r.jsx)(l.ll,{children:"Distribui\xe7\xe3o de Quest\xf5es por \xc1rea"})}),(0,r.jsx)(l.aY,{children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,r.jsx)("span",{className:"font-medium",children:e.nome}),(0,r.jsxs)(i.C,{variant:"outline",children:[e.total_questoes," quest\xf5es"]})]},e.id))})})]}),!e&&(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-8",children:(0,r.jsxs)("p",{className:"text-yellow-800",children:[(0,r.jsx)(x.Z,{className:"inline h-5 w-5 mr-2"}),"Fa\xe7a ",(0,r.jsx)(o.default,{href:"/login",className:"text-blue-600 underline",children:"login"})," para salvar seu progresso e acompanhar estat\xedsticas"]})}),e&&(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-8",children:(0,r.jsxs)("p",{className:"text-green-800",children:[(0,r.jsx)(N.Z,{className:"inline h-5 w-5 mr-2"}),"Logado como ",(null==a?void 0:a.nome)||e.email,". Seus resultados ser\xe3o salvos automaticamente!"]})}),(0,r.jsx)(n.z,{onClick:W,size:"lg",className:"px-8 py-4 text-xl",disabled:X||0===d.length,children:X?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Z,{className:"mr-2 h-6 w-6 animate-spin"}),"Gerando Simulado..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.Z,{className:"mr-2 h-6 w-6"}),"Iniciar Simulado"]})}),!1]})})]})}},9174:function(e,a,s){"use strict";s.d(a,{C:function(){return l}});var r=s(7437);s(2265);var t=s(535),o=s(3448);let n=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:a,variant:s,...t}=e;return(0,r.jsx)("div",{className:(0,o.cn)(n({variant:s}),a),...t})}},2381:function(e,a,s){"use strict";s.d(a,{z:function(){return c}});var r=s(7437),t=s(2265),o=s(7053),n=s(535),l=s(3448);let i=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=t.forwardRef((e,a)=>{let{className:s,variant:t,size:n,asChild:c=!1,...d}=e,u=c?o.g7:"button";return(0,r.jsx)(u,{className:(0,l.cn)(i({variant:t,size:n,className:s})),ref:a,...d})});c.displayName="Button"},9820:function(e,a,s){"use strict";s.d(a,{Ol:function(){return l},Zb:function(){return n},aY:function(){return c},ll:function(){return i}});var r=s(7437),t=s(2265),o=s(3448);let n=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t})});n.displayName="Card";let l=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",s),...t})});l.displayName="CardHeader";let i=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("h3",{ref:a,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",s),...t})});i.displayName="CardTitle",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("p",{ref:a,className:(0,o.cn)("text-sm text-muted-foreground",s),...t})}).displayName="CardDescription";let c=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,o.cn)("p-6 pt-0",s),...t})});c.displayName="CardContent",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,o.cn)("flex items-center p-6 pt-0",s),...t})}).displayName="CardFooter"},5648:function(e,a,s){"use strict";s.d(a,{H:function(){return l},a:function(){return i}});var r=s(7437),t=s(2265),o=s(5526);let n=(0,t.createContext)({});function l(e){let{children:a}=e,[s,l]=(0,t.useState)(null),[i,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(!0),m=(0,o.e)();(0,t.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:a}=await m.auth.getSession();a?(console.error("Erro ao obter sess\xe3o:",a),l(null),c(null)):(null==e?void 0:e.user)?(l(e.user),await h(e.user.id)):(l(null),c(null))}catch(e){console.error("Erro na verifica\xe7\xe3o inicial:",e),l(null),c(null)}finally{u(!1)}})();let{data:{subscription:e}}=m.auth.onAuthStateChange(async(e,a)=>{var s;console.log("Auth state change:",e,null==a?void 0:null===(s=a.user)||void 0===s?void 0:s.email),(null==a?void 0:a.user)?(l(a.user),await h(a.user.id)):(l(null),c(null)),u(!1)});return()=>{e.unsubscribe()}},[]);let h=async e=>{try{let{data:t,error:o}=await m.from("profiles").select("*").eq("id",e).single();if(o&&"PGRST116"===o.code){var a,r;let{data:t,error:o}=await m.from("profiles").insert([{id:e,email:(null==s?void 0:s.email)||"",nome:(null==s?void 0:null===(a=s.user_metadata)||void 0===a?void 0:a.nome)||(null==s?void 0:null===(r=s.email)||void 0===r?void 0:r.split("@")[0])||"",plano:"gratuito"}]).select().single();o?console.error("Erro ao criar profile:",o):c(t)}else o?console.error("Erro ao carregar profile:",o):(c(t),await m.from("profiles").update({ultimo_acesso:new Date().toISOString()}).eq("id",e))}catch(e){console.error("Erro ao carregar profile:",e)}},g=async(e,a)=>{try{let{error:s}=await m.auth.signInWithPassword({email:e,password:a});return{error:s}}catch(e){return{error:e}}},x=async(e,a,s)=>{try{let{error:r}=await m.auth.signUp({email:e,password:a,options:{data:{nome:s}}});return{error:r}}catch(e){return{error:e}}},f=async()=>{try{await m.auth.signOut(),l(null),c(null),window.location.href="/"}catch(e){console.error("Erro ao fazer logout:",e)}};return(0,r.jsx)(n.Provider,{value:{user:s,profile:i,signOut:f,signIn:g,signUp:x,loading:d},children:a})}let i=()=>{let e=(0,t.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},5526:function(e,a,s){"use strict";s.d(a,{e:function(){return l}});var r=s(8439);let t="https://wqhkcyscozpruhwylhar.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndxaGtjeXNjb3pwcnVod3lsaGFyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3NzcyMzcsImV4cCI6MjA3MzM1MzIzN30.gFMB7xdShbvwPDoxwni_ijSa_zJ2w8s5B1BwUbHKyK0";if(!t||!o)throw Error("Missing Supabase environment variables");let n=(0,r.eI)(t,o),l=()=>n},3448:function(e,a,s){"use strict";s.d(a,{cn:function(){return o}});var r=s(1994),t=s(3335);function o(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,t.m6)((0,r.W)(a))}}},function(e){e.O(0,[439,284,972,971,117,744],function(){return e(e.s=9741)}),_N_E=e.O()}]);